# Z√°kladn√≠ implementace GDPR

Tento p≈ô√≠klad ukazuje nejjednodu≈°≈°√≠ zp≈Øsob implementace GDPR compliance do Next.js aplikace.

## üìÅ Struktura

```
basic-setup/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ layout.js           # App Router layout s GDPR
‚îú‚îÄ‚îÄ _app.js            # Pages Router setup
‚îú‚îÄ‚îÄ page.js            # Uk√°zkov√° str√°nka
‚îî‚îÄ‚îÄ gdpr-page.js       # Str√°nka pro spr√°vu GDPR
```

## üöÄ Rychl√Ω start

### 1. Zkop√≠rujte komponenty

```bash
# Zkop√≠rujte GDPR komponenty do va≈°eho projektu
cp -r ../../components/gdpr ./components/
cp -r ../../hooks ./
cp -r ../../lib/gdpr ./lib/
```

### 2. App Router (Next.js 13+)

```jsx
// app/layout.js
import { CookieConsent } from '../components/gdpr';
import './globals.css';

export const metadata = {
  title: 'M≈Øj web s GDPR',
  description: 'P≈ô√≠klad implementace GDPR compliance'
};

export default function RootLayout({ children }) {
  return (
    <html lang="cs">
      <body>
        {children}
        {/* GDPR Banner - automaticky se zobraz√≠ nov√Ωm n√°v≈°tƒõvn√≠k≈Øm */}
        <CookieConsent 
          locale="cs"
          theme="modern"
          position="bottom"
        />
      </body>
    </html>
  );
}
```

### 3. Pages Router (Next.js 12)

```jsx
// pages/_app.js
import { CookieConsent } from '../components/gdpr';
import '../styles/globals.css';

export default function App({ Component, pageProps }) {
  return (
    <>
      <Component {...pageProps} />
      <CookieConsent />
    </>
  );
}
```

### 4. Z√°kladn√≠ str√°nka s tracking

```jsx
// pages/index.js nebo app/page.js
'use client'; // Pouze pro App Router

import { useCookieConsent } from '../hooks/useCookieConsent';
import { useEffect } from 'react';

export default function HomePage() {
  const { hasConsent, trackEvent } = useCookieConsent();

  // Track page view pouze pokud m√° u≈æivatel souhlas
  useEffect(() => {
    if (hasConsent('analytics')) {
      trackEvent('page_view', { page: 'homepage' });
    }
  }, [hasConsent, trackEvent]);

  const handleButtonClick = () => {
    // Track event pouze s consent
    trackEvent('button_click', { 
      button: 'cta',
      section: 'hero' 
    }, 'analytics');
    
    // Va≈°e business logika...
    alert('Dƒõkujeme za klik!');
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow">
        <div className="max-w-7xl mx-auto px-4 py-6">
          <h1 className="text-3xl font-bold text-gray-900">
            M≈Øj web s GDPR
          </h1>
        </div>
      </header>

      {/* Main content */}
      <main className="max-w-7xl mx-auto px-4 py-12">
        <div className="text-center">
          <h2 className="text-4xl font-extrabold text-gray-900 mb-8">
            V√≠tejte na na≈°em webu
          </h2>
          
          <p className="text-xl text-gray-600 mb-8">
            Tento web respektuje va≈°e soukrom√≠ a dodr≈æuje GDPR.
          </p>

          <button
            onClick={handleButtonClick}
            className="bg-blue-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-blue-700 transition-colors"
          >
            Vyzkou≈°et tracking
          </button>

          {/* Podm√≠nƒõn√© zobrazen√≠ obsahu */}
          <div className="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="bg-white p-6 rounded-lg shadow">
              <h3 className="text-lg font-semibold mb-2">V≈ædy dostupn√©</h3>
              <p className="text-gray-600">
                Tento obsah je v≈ædy dostupn√Ω bez ohledu na cookies.
              </p>
            </div>

            {hasConsent('analytics') ? (
              <div className="bg-green-50 p-6 rounded-lg shadow border border-green-200">
                <h3 className="text-lg font-semibold mb-2 text-green-800">
                  Analytics aktive
                </h3>
                <p className="text-green-600">
                  D√≠ky va≈°emu souhlasu m≈Ø≈æeme vylep≈°ovat tento web.
                </p>
              </div>
            ) : (
              <div className="bg-gray-50 p-6 rounded-lg shadow border border-gray-200">
                <h3 className="text-lg font-semibold mb-2 text-gray-600">
                  Analytics neaktivn√≠
                </h3>
                <p className="text-gray-500">
                  Pro analytics pot≈ôebujeme v√°≈° souhlas.
                </p>
              </div>
            )}

            {hasConsent('marketing') ? (
              <div className="bg-purple-50 p-6 rounded-lg shadow border border-purple-200">
                <h3 className="text-lg font-semibold mb-2 text-purple-800">
                  Marketing aktivn√≠
                </h3>
                <p className="text-purple-600">
                  M≈Ø≈æeme v√°m zobrazovat relevantn√≠ reklamy.
                </p>
              </div>
            ) : (
              <div className="bg-gray-50 p-6 rounded-lg shadow border border-gray-200">
                <h3 className="text-lg font-semibold mb-2 text-gray-600">
                  Marketing neaktivn√≠
                </h3>
                <p className="text-gray-500">
                  Pro personalizovan√© reklamy pot≈ôebujeme souhlas.
                </p>
              </div>
            )}
          </div>
        </div>
      </main>

      {/* Footer */}
      <footer className="bg-gray-800 text-white mt-16">
        <div className="max-w-7xl mx-auto px-4 py-8">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <h3 className="text-lg font-semibold mb-4">Kontakt</h3>
              <p>Email: info@example.com</p>
              <p>Telefon: +420 123 456 789</p>
            </div>
            
            <div>
              <h3 className="text-lg font-semibold mb-4">GDPR</h3>
              <ul className="space-y-2">
                <li>
                  <a href="/gdpr" className="hover:text-blue-300 transition-colors">
                    Spr√°va osobn√≠ch √∫daj≈Ø
                  </a>
                </li>
                <li>
                  <a href="/privacy-policy" className="hover:text-blue-300 transition-colors">
                    Ochrana osobn√≠ch √∫daj≈Ø
                  </a>
                </li>
              </ul>
            </div>
            
            <div>
              <h3 className="text-lg font-semibold mb-4">Stav cookies</h3>
              <div className="space-y-1 text-sm">
                <div>Analytics: {hasConsent('analytics') ? '‚úÖ' : '‚ùå'}</div>
                <div>Marketing: {hasConsent('marketing') ? '‚úÖ' : '‚ùå'}</div>
                <div>Funkƒçn√≠: {hasConsent('functional') ? '‚úÖ' : '‚ùå'}</div>
              </div>
            </div>
          </div>
          
          <div className="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-400">
            <p>&copy; 2024 M≈Øj web. V≈°echna pr√°va vyhrazena.</p>
            <p className="mt-2">
              GDPR template od{' '}
              <a href="https://webnamiru.site" className="text-blue-400 hover:text-blue-300">
                WEB NA M√çRU
              </a>
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}
```

### 5. GDPR management str√°nka

```jsx
// pages/gdpr.js nebo app/gdpr/page.js
import { GDPRSettings } from '../components/gdpr';

export const metadata = {
  title: 'Spr√°va osobn√≠ch √∫daj≈Ø | M≈Øj web',
  description: 'Spravujte va≈°e osobn√≠ √∫daje a nastaven√≠ soukrom√≠'
};

export default function GDPRPage() {
  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-4xl mx-auto px-4 py-8">
        <GDPRSettings locale="cs" />
      </div>
    </div>
  );
}
```

## ‚öôÔ∏è Konfigurace

### Environment variables (.env.local)

```bash
# Z√°kladn√≠ konfigurace
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
NEXT_PUBLIC_SITE_NAME="M≈Øj web"

# Analytics (voliteln√©)
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_FB_PIXEL_ID=123456789

# GDPR API keys (pro export/smaz√°n√≠ dat)
GDPR_ENCRYPTION_KEY=your-32-character-secret-key
GDPR_JWT_SECRET=your-jwt-secret-key

# Email pro GDPR notifikace
BREVO_API_KEY=your-brevo-api-key
SMTP_USER=your-email@domain.com
SMTP_PASS=your-smtp-password

# Pr√°vn√≠ kontakt
GDPR_CONTROLLER_NAME="Va≈°e jm√©no"
GDPR_CONTROLLER_EMAIL=gdpr@yourdomain.com
GDPR_CONTROLLER_PHONE="+420 xxx xxx xxx"
```

### Tailwind CSS

P≈ôidejte do `tailwind.config.js`:

```javascript
module.exports = {
  content: [
    // ... ostatn√≠ cesty
    './components/gdpr/**/*.{js,jsx}',
  ],
  // ... zbytek konfigurace
}
```

## üß™ Testov√°n√≠

### Test cookie banner

1. Otev≈ôete web v incognito re≈æimu
2. Banner by se mƒõl zobrazit automaticky po 1 sekundƒõ
3. Vyzkou≈°ejte r≈Øzn√© kombinace souhlasu
4. Zkontrolujte localStorage: `cookie-consent`

### Test tracking

1. Otev≈ôete Developer Tools ‚Üí Console
2. Povolte analytics cookies
3. Kliknƒõte na tlaƒç√≠tko "Vyzkou≈°et tracking"
4. V console by se mƒõly zobrazit tracking eventy

### Test GDPR str√°nky

1. P≈ôejdƒõte na `/gdpr`
2. Vyzkou≈°ejte export dat (test email)
3. Zkontrolujte zmƒõny cookie preferenc√≠

## üöÄ Nasazen√≠

### Vercel

```bash
# Nastavte environment variables ve Vercel dashboard
vercel env add GDPR_ENCRYPTION_KEY
vercel env add GDPR_JWT_SECRET
# ... ostatn√≠ promƒõnn√©

# Deploy
vercel --prod
```

### Netlify

```bash
# P≈ôidejte environment variables do netlify.toml
# nebo v Netlify dashboard
netlify deploy --prod
```

## üîç Debugging

### Zapnut√≠ debug m√≥du

```jsx
<CookieConsent 
  debug={true} // Zobraz√≠ debug informace v console
/>
```

### Sledov√°n√≠ consent zmƒõn

```jsx
import { useCookieConsentListener } from '../hooks/useCookieConsent';

function MyComponent() {
  useCookieConsentListener((newConsent) => {
    console.log('Consent changed:', newConsent);
  });
  
  return <div>Komponenta sleduj√≠c√≠ zmƒõny</div>;
}
```

## üìã Checklist

Po implementaci zkontrolujte:

- [ ] Banner se zobrazuje nov√Ωm n√°v≈°tƒõvn√≠k≈Øm
- [ ] Consent se ukl√°d√° do localStorage
- [ ] Analytics se naƒç√≠taj√≠ pouze po souhlasu
- [ ] Tracking funguje spr√°vnƒõ
- [ ] GDPR str√°nka je dostupn√°
- [ ] Environment variables jsou nastaveny
- [ ] Legal str√°nky jsou vytvo≈ôeny

## üí° Tipy

1. **Performance**: Banner se naƒç√≠t√° asynchronnƒõ, neblokuje str√°nku
2. **SEO**: GDPR komponenty neovliv≈àuj√≠ SEO, pokud jsou spr√°vnƒõ implementov√°ny
3. **Accessibility**: V≈°echny komponenty podporuj√≠ keyboard navigation
4. **Mobile**: Banner je plnƒõ responzivn√≠

## üÜò ≈òe≈°en√≠ probl√©m≈Ø

**Banner se nezobrazuje**
```javascript
// Zkontrolujte localStorage
console.log(localStorage.getItem('cookie-consent'));
// Mƒõlo by b√Ωt null pro nov√© n√°v≈°tƒõvn√≠ky
```

**Tracking nefunguje**
```javascript
// Zkontrolujte consent stav
import { useCookieConsent } from '../hooks/useCookieConsent';
const { consent } = useCookieConsent();
console.log('Current consent:', consent);
```

**Styling probl√©my**
```bash
# Ujistƒõte se, ≈æe Tailwind zahrnuje GDPR komponenty
npm run build
# Zkontrolujte CSS output
```

## üìû Podpora

Pot≈ôebujete pomoƒç? Kontaktujte n√°s:

- üìß **Email**: tech-podpora@webnamiru.site
- üêõ **Issues**: [GitHub Issues](https://github.com/webnamiru/nextjs-gdpr-template/issues)
- üí¨ **Discord**: [WEB NA M√çRU Community](https://discord.gg/webnamiru)

---

**üéâ Gratulujeme! V√°≈° web je nyn√≠ GDPR compliant!** üõ°Ô∏è